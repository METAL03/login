<!-- Define que el documento esta bajo el estandar de HTML 5 -->
<!doctype html>

<!-- Representa la raíz de un documento HTML o XHTML. Todos los demás elementos deben ser descendientes de este elemento. -->
<html lang="es">
    
    <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Formulario simple</title>
        
        <link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet"> 
        
        <!-- Link hacia el archivo de estilos css -->
        <link rel="stylesheet" href="css/login.css">
        
        <style type="text/css">
            
        </style>
        
        <script type="text/javascript">
        
        </script>
        
    </head>
    <div id="cabecera">
        <center><h1>TAREA 01 </h1></center>
    </div> 
    <body>
      
      <div id="sesion"></div>
        <div id="contenedor">
            
            <div id="contenedorcentrado">
                <div id="login">
                  
                <form action="" id="form1">
                  <center><h1>REGISTRATE</h1></center>                
                <p>EMAIL</p>
                <input type="email" name="" id="email"> 
                <P>CONTRASEÑA</P>
                <input type="password" name="" id="pass"> 
                <button id="ingresar" > GUARDAR </button>
                <button type="reset" id="limpiar" > LIMPIAR </button>
                </form>

                        <label for="usuario">Usuario</label><br>
                        <input type="email" name="" id="email1" placeholder="aqui tu correo"> 
                        <label for="password">Contraseña</label><br>
                        <input type="password" name="" id="pass1" placeholder="aqui tu contraseña"> 
                        <button id="acceder"> INICIAR </button>
                        <button id="google">INICIAR SESION CON GOOGLE</button>
                        
                        <script type="module">
                          // Import the functions you need from the SDKs you need
                          import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
                          //Creamos una nueva cuenta
                          import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, GoogleAuthProvider, signInWithRedirect, getRedirectResult } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-auth.js";
                          //import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-auth.js";
                  
                          // TODO: Add SDKs for Firebase products that you want to use
                          // https://firebase.google.com/docs/web/setup#available-libraries
                        
                          // Your web app's Firebase configuration
                          const firebaseConfig = {
                            apiKey: "AIzaSyD1fM_RCgKJoexILrUEN1PzmvXNOZzRidw",
                            authDomain: "autenticacion-efe52.firebaseapp.com",
                            projectId: "autenticacion-efe52",
                            storageBucket: "autenticacion-efe52.appspot.com",
                            messagingSenderId: "296857017678",
                            appId: "1:296857017678:web:40f77890df0f3f59d3d21f"
                          };
                        
                          // Initialize Firebase
                          const app = initializeApp(firebaseConfig);
                          const auth = getAuth(app);
                          const provider = new GoogleAuthProvider(app);
                  
                          //conectamos con el ID y obtenoms los valores 
                          document.getElementById("ingresar").addEventListener("click", function(){
                            //obtener los valores 
                            const email =document.getElementById("email").value;
                            const password = document.getElementById("pass").value;
                  
                            //realizo la conexion de pagina web a firebase
                            createUserWithEmailAndPassword(auth, email, password)
                    .then((userCredential) => {
                      // Signed in 
                      const user = userCredential.user;
                      // ...
                      alert("Tu cuenta esta creada en Firebase")
                    })
                    .catch((error) => {
                      const errorCode = error.code;
                      const errorMessage = error.message;
                      alert("Tu cuenta no se creado por falta de datos o ya está registrado")
                      // ..
                    });
                  })
                  
                        //conectamos con el ingreso de sesion
                        document.getElementById("acceder").addEventListener("click", function(){
                          const email1 = document.getElementById("email1").value;
                          const pass1 = document.getElementById("pass1").value;
                  
                          signInWithEmailAndPassword(auth, email1, pass1)
                    .then((userCredential) => {
                      // Signed in 
                      const user = userCredential.user;
                      // ...
                      alert("Tu cuenta esta activa")
                      //Para que aparezca una pagina de internet
                      //window.open("https://www.youtube.com/", "mi pagina favorita" , "width=300px, heigth=200px")
                  
                     //Aparezca una pagina propia 
                    window.open("https://www.youtube.com/")
                    })
                    .catch((error) => {
                      const errorCode = error.code;
                      const errorMessage = error.message;
                      alert("Esta cuenta no existe, debes registrarte primero")
                    });
                  
                        })
                  
                        function limpiar(){
                          document.getElementById("form1").reset();
                        }
                        
                        document.getElementById("google").addEventListener("click", function () {
                        signInWithRedirect(auth, provider);
                        getRedirectResult(auth)
                          .then((result) => {
                            // This gives you a Google Access Token. You can use it to access Google APIs.
                            const credential = GoogleAuthProvider.credentialFromResult(result);
                            const token = credential.accessToken;
                  
                            // The signed-in user info.
                            const user = result.user;
                          }).catch((error) => {
                            // Handle Errors here.
                            const errorCode = error.code;
                            const errorMessage = error.message;
                            // The email of the user's account used.
                            const email = error.customData.email;
                            // The AuthCredential type that was used.
                            const credential = GoogleAuthProvider.credentialFromError(error);
                            // ...
                          });
                      })                  
                        </script>
                    </form>
                    
    
                </div>
                <div id="derecho">
                    <div class="titulo">
                        Bienvenido
                    </div>
                    <hr>
                    <div class="pie-form">
                        <a href="#">¿Perdiste tu contraseña?</a>
                        <hr>
                        
                    </div>
                </div>
            </div>
        </div>
        
    
<!-- Aquí se realizara el pie de pagina -->
<hr size="10" color="red" width="100%" align="center">
<footer style="background-color: rgb(240, 98, 98); clear:both; color: rgb(8, 8, 8); margin: 10px;">
<p style="margin:10px ;">Pagina creada por José</p>
<p style="margin:10px ;">DERECHOS RESERVADOS</p>
<p style="margin:10px;">
<!-- ENLACE PARA QUE SE ABRA UN CORREO -->
<a href="mailto:bravo25whisky@gmail.com" target="_blank"> Comentario a mi correo </a><br>
<!-- Enlace para que descarguen un archivo de tus documentos -->
<a href="https://metal03.github.io/TAREA1/" target="_blank"> Archivo descargable </a><br>
<a href="https://github.com/METAL03" target="_blank"> Github </a><br>
</p>
</footer>
</body>
</html>